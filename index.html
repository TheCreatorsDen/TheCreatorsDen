<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creator's Den Leaderboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Teko:wght@500;600;700&family=Poppins:wght@500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #0f1020;
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }
        
        .font-teko { font-family: 'Teko', sans-serif; }

        /* Video Background */
        #video-container {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            overflow: hidden;
        }
        #video-bg {
            width: 100%; height: 100%;
            object-fit: cover;
            opacity: 0.6; 
        }
        
        .bg-overlay {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(circle at center, rgba(24, 19, 71, 0.6) 0%, rgba(10, 10, 20, 0.95) 100%);
            z-index: 1;
        }

        .scanlines {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: repeating-linear-gradient(
                to bottom,
                transparent 0px,
                transparent 2px,
                rgba(0, 0, 0, 0.1) 3px
            );
            pointer-events: none;
            z-index: 2;
        }

        /* Panel Styles */
        .leaderboard-panel {
            background: rgba(20, 20, 40, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 30px;
            padding: 20px;
            backdrop-filter: blur(12px);
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-track { background: rgba(255,255,255,0.05); }
        .custom-scroll::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.3); border-radius: 10px; }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        .animate-float { animation: float 4s ease-in-out infinite; }
        .animate-float-delay { animation: float 4s ease-in-out infinite 2s; }
    </style>
</head>
<body>

    <div id="video-container">
        <video autoplay muted loop playsinline id="video-bg">
            <source src="https://static.videezy.com/system/resources/previews/000/051/915/original/Blue_Abstract_Background.mp4" type="video/mp4">
        </video>
        <div class="bg-overlay"></div>
        <div class="scanlines"></div>
    </div>

    <!-- HEADER -->
    <header class="w-full p-4 text-center z-10 mt-4 mb-4 animate-[fadeIn_1s_ease-out]">
        <div class="flex flex-col items-center justify-center gap-1">
            
            <!-- REPLACED LOGO IMAGE WITH TEXT -->
            <h2 class="text-2xl md:text-3xl font-bold text-blue-200 tracking-[0.2em] uppercase drop-shadow-md">
                THE CREATOR'S DEN
            </h2>

            <!-- TITLE AND TROPHY -->
            <div class="flex items-center justify-center gap-3 md:gap-5 transform relative mt-2">
                <h1 class="text-5xl md:text-8xl font-teko font-bold text-transparent bg-clip-text bg-gradient-to-b from-[#ffe066] to-[#ffcc00] uppercase tracking-wider drop-shadow-2xl leading-none pt-2" style="filter: drop-shadow(0 0 10px rgba(255, 204, 0, 0.5));">
                    LEADERBOARD
                </h1>
                <i class="fas fa-trophy text-4xl md:text-6xl text-[#ffcc00] drop-shadow-lg animate-pulse mb-1"></i>
            </div>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main class="flex-grow container mx-auto px-4 flex flex-col md:flex-row items-start md:items-center justify-center gap-8 md:gap-12 z-10 pb-10">
        
        <!-- LIST -->
        <div class="w-full md:w-[45%] h-[400px] md:h-[550px] leaderboard-panel flex flex-col order-2 md:order-1">
            <!-- UPDATED LABELS HERE -->
            <div class="flex items-center justify-between mb-4 px-2 border-b border-white/10 pb-2">
                <span class="text-xs font-bold text-blue-300 uppercase tracking-widest">NAME</span>
                <span class="text-xs font-bold text-blue-300 uppercase tracking-widest">POINTS</span>
            </div>
            <div id="leaderboard-list" class="custom-scroll overflow-y-auto pr-2 space-y-4 h-full pt-2">
                <div class="text-center text-gray-400 mt-10 flex flex-col items-center">
                    <i class="fas fa-circle-notch fa-spin text-2xl mb-2 text-blue-400"></i>
                    <span>Syncing Data...</span>
                </div>
            </div>
        </div>

        <!-- PODIUM -->
        <div class="w-full md:w-[45%] flex items-end justify-center pt-4 md:pt-0 mb-8 md:mb-0 order-1 md:order-2">
            <div id="podium-container" class="flex items-end justify-center gap-3 md:gap-6 w-full"></div>
        </div>
    </main>

    <!-- FOOTER -->
    <footer class="w-full bg-[#0a0b16] py-6 z-20 mt-auto relative overflow-hidden">
        <div class="absolute top-0 left-0 w-full h-[2px] bg-gradient-to-r from-transparent via-blue-500 to-transparent opacity-70"></div>
        <div class="container mx-auto flex flex-col md:flex-row justify-between items-center px-6">
            <div class="mb-4 md:mb-0 text-center md:text-left">
                <h3 class="text-lg font-teko font-bold text-blue-400 tracking-wider uppercase">The Creator's Den</h3>
                <p class="text-gray-500 text-xs mt-1">Â© 2025 The Creator's Den. All rights reserved.</p>
            </div>
            <div class="flex items-center gap-4">
                <span class="text-blue-200 font-bold tracking-[0.1em] uppercase text-xs hidden md:block">Connect:</span>
                <a href="https://www.instagram.com/the.creators_den?igsh=MWxjeHI3ODd0M2ZyZA==" target="_blank" class="group relative">
                    <div class="absolute inset-0 bg-pink-600 rounded-full blur-md opacity-40 group-hover:opacity-80 transition duration-300"></div>
                    <div class="w-10 h-10 rounded-full bg-gradient-to-tr from-[#f09433] via-[#dc2743] to-[#bc1888] flex items-center justify-center shadow-lg border border-white/20 relative z-10 transform group-hover:-translate-y-1 transition duration-300">
                        <i class="fab fa-instagram text-xl text-white"></i>
                    </div>
                </a>
                <a href="https://chat.whatsapp.com/J9PtvxunychI8ifKUbPJkw?mode=hqrt3" target="_blank" class="group relative">
                    <div class="absolute inset-0 bg-green-600 rounded-full blur-md opacity-40 group-hover:opacity-80 transition duration-300"></div>
                    <div class="w-10 h-10 rounded-full bg-[#25D366] flex items-center justify-center shadow-lg border border-white/20 relative z-10 transform group-hover:-translate-y-1 transition duration-300">
                        <i class="fab fa-whatsapp text-xl text-white"></i>
                    </div>
                </a>
            </div>
        </div>
    </footer>

    <script>
        // YOUR EXACT GOOGLE SHEET LINK
        const SHEET_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRkTp9RMmnQeu5PkTka9qYw_9aBdFduLw2NYjVDKoO9dFp7515s3-i2VA715nxf7dYPVPhgMQqSaKKS/pub?output=csv'; 

        function getInitials(name) {
            if (!name) return "?";
            const parts = name.trim().split(' ');
            if (parts.length === 1) return parts[0].substring(0, 2).toUpperCase();
            return (parts[0][0] + parts[parts.length - 1][0]).toUpperCase();
        }

        async function loadData() {
            try {
                const res = await fetch(SHEET_URL);
                if (!res.ok) throw new Error("Sheet not found");
                const text = await res.text();
                const rows = text.split('\n').map(r => r.split(','));
                const players = [];
                for (let i = 1; i < rows.length; i++) {
                    const col = rows[i];
                    if (col.length < 2) continue;
                    const name = col[0].replace(/"/g, '').trim();
                    let pts = 0;
                    for(let j=1; j<col.length; j++) {
                        const cleanVal = col[j].replace(/"/g, '').trim();
                        if(cleanVal !== "" && !isNaN(cleanVal)) {
                            pts = parseInt(cleanVal);
                            break; 
                        }
                    }
                    if(name && name !== "Name" && !isNaN(pts)) {
                        players.push({ name, points: pts });
                    }
                }
                players.sort((a, b) => b.points - a.points);
                renderList(players);
                renderPodium(players);
            } catch (err) {
                const list = document.getElementById('leaderboard-list');
                // Friendly message explaining why data isn't showing locally
                list.innerHTML = `<div class="text-center text-red-400 mt-10 p-4 bg-red-900/30 rounded-xl border border-red-500/50">
                    <i class="fas fa-exclamation-triangle text-3xl mb-3"></i><br>
                    <span class="font-bold text-lg">Data Not Found (Local File)</span><br>
                    <span class="text-sm text-red-300 mt-2 block">This is normal! The browser blocks data fetching from local files for security.</span>
                    <span class="text-sm text-green-400 mt-2 block font-bold">Upload to GitHub Pages and it will work!</span>
                </div>`;
            }
        }

        function renderList(players) {
            const list = document.getElementById('leaderboard-list');
            list.innerHTML = '';
            if(players.length === 0) {
                 list.innerHTML = `<div class="text-center text-gray-400 mt-10">No player data found.</div>`;
                 return;
            }
            players.forEach((p, idx) => {
                const rank = idx + 1;
                const initials = getInitials(p.name);
                let badgeHtml = `<div class="w-8 md:w-12 flex justify-center"><span class="text-gray-500 font-teko text-xl md:text-3xl font-bold opacity-50">#${rank}</span></div>`;
                if (rank === 1) badgeHtml = `<div class="w-8 md:w-12 flex justify-center"><div class="relative transform hover:scale-110 transition"><i class="fas fa-certificate text-yellow-400 text-2xl md:text-4xl drop-shadow-[0_0_10px_rgba(250,204,21,0.6)]"></i><span class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-black font-bold text-[10px] md:text-xs">1</span></div></div>`;
                if (rank === 2) badgeHtml = `<div class="w-8 md:w-12 flex justify-center"><div class="relative transform hover:scale-110 transition"><i class="fas fa-certificate text-gray-300 text-2xl md:text-4xl drop-shadow-[0_0_10px_rgba(209,213,219,0.6)]"></i><span class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-black font-bold text-[10px] md:text-xs">2</span></div></div>`;
                if (rank === 3) badgeHtml = `<div class="w-8 md:w-12 flex justify-center"><div class="relative transform hover:scale-110 transition"><i class="fas fa-certificate text-orange-400 text-2xl md:text-4xl drop-shadow-[0_0_10px_rgba(251,146,60,0.6)]"></i><span class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-black font-bold text-[10px] md:text-xs">3</span></div></div>`;

                const html = `
                <div class="flex items-center w-full animate-[slideIn_0.5s_ease-out_forwards] group" style="animation-delay: ${idx * 0.1}s">
                    ${badgeHtml}
                    <div class="relative flex-grow ml-3 h-14 md:h-16 transform transition duration-300 hover:scale-[1.02] hover:brightness-110">
                        <div class="absolute inset-0 bg-gradient-to-r from-[#a31621] to-[#d92e3c] rounded-full flex items-center justify-between px-4 pl-24 md:pl-32 shadow-[0_5px_15px_rgba(163,22,33,0.3)] border border-white/10">
                             <div class="text-left leading-none overflow-hidden flex flex-col justify-center">
                                <div class="text-[9px] md:text-[11px] text-red-200 uppercase tracking-widest opacity-80 mb-[2px]">NAME</div>
                                <div class="text-base md:text-xl font-bold uppercase whitespace-nowrap truncate w-[100px] md:w-[180px] tracking-wide drop-shadow-md">${p.name}</div>
                             </div>
                             <div class="text-right leading-none pl-2 flex flex-col justify-center">
                                <div class="text-2xl md:text-3xl font-teko font-bold text-white drop-shadow-md">${p.points}</div>
                                <div class="text-[9px] md:text-[11px] font-bold uppercase text-red-200 tracking-widest">PTS</div>
                             </div>
                        </div>
                        <div class="absolute left-0 top-1/2 transform -translate-y-1/2 w-16 h-16 md:w-20 md:h-20 bg-[#8a121b] rounded-full border-[4px] border-[#0f1020] flex items-center justify-center shadow-xl z-10 group-hover:border-white transition duration-300">
                            <span class="text-xl md:text-2xl font-bold text-white drop-shadow-md">${initials}</span>
                        </div>
                    </div>
                </div>`;
                list.insertAdjacentHTML('beforeend', html);
            });
        }

        function renderPodium(players) {
            const container = document.getElementById('podium-container');
            container.innerHTML = '';
            const top3 = [
                players[1] || {name: "---", points: 0}, 
                players[0] || {name: "---", points: 0}, 
                players[2] || {name: "---", points: 0}  
            ];
            const configs = [
                { rank: 2, color: 'bg-gradient-to-b from-red-500 to-red-700', height: 'h-28 md:h-40', border: 'border-red-400', translate: 'translate-y-0', anim: 'animate-float-delay' }, 
                { rank: 1, color: 'bg-gradient-to-b from-blue-500 to-blue-700', height: 'h-36 md:h-52', border: 'border-blue-400', translate: '-translate-y-4', anim: 'animate-float' }, 
                { rank: 3, color: 'bg-gradient-to-b from-yellow-400 to-yellow-600', height: 'h-24 md:h-32', border: 'border-yellow-300', translate: 'translate-y-0', anim: 'animate-float-delay' }
            ];
            top3.forEach((p, i) => {
                const cfg = configs[i];
                const initials = getInitials(p.name);
                const html = `
                <div class="flex flex-col items-center w-1/3 max-w-[140px] ${cfg.translate} ${cfg.anim}">
                    ${cfg.rank === 1 ? `<div class="relative"><i class="fas fa-crown text-[#ffd700] text-3xl md:text-5xl mb-2 drop-shadow-[0_0_15px_rgba(255,215,0,0.8)] animate-pulse"></i></div>` : ''}
                    ${cfg.rank !== 1 ? `<div class="h-10 md:h-14"></div>` : ''}
                    <div class="w-16 h-16 md:w-24 md:h-24 bg-[#a31621] rounded-full border-[4px] border-white flex items-center justify-center shadow-[0_10px_20px_rgba(0,0,0,0.5)] mb-3 z-10 relative group hover:scale-110 transition duration-300">
                         <span class="text-xl md:text-3xl font-bold text-white">${initials}</span>
                         ${cfg.rank === 1 ? '<div class="absolute -bottom-2 bg-yellow-400 text-black text-[10px] font-bold px-2 py-0.5 rounded-full shadow-lg">WINNER</div>' : ''}
                    </div>
                    <div class="mb-3 text-center relative z-0">
                        <div class="text-[11px] md:text-base font-bold uppercase drop-shadow-lg leading-tight px-1 truncate max-w-[90px] md:max-w-full text-white">${p.name}</div>
                        <div class="text-[10px] md:text-sm font-teko text-yellow-400 tracking-widest bg-black/30 px-2 rounded mt-1 inline-block">${p.points} PTS</div>
                    </div>
                    <div class="w-full ${cfg.color} ${cfg.height} rounded-t-lg flex items-center justify-center shadow-[0_10px_30px_rgba(0,0,0,0.5)] border-t-4 ${cfg.border} relative overflow-hidden">
                        <div class="absolute top-0 left-0 w-full h-full bg-gradient-to-b from-white/20 to-transparent pointer-events-none"></div>
                        <span class="text-5xl md:text-8xl font-teko font-bold text-white/20 select-none">${cfg.rank}</span>
                    </div>
                </div>`;
                container.insertAdjacentHTML('beforeend', html);
            });
        }
        loadData();
    </script>
</body>

</html>
